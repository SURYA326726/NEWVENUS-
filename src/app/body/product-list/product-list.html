<div class="productListContainer">
  <div class="headerColumn">
      <p class="productsHeading">PRODUCTS / {{ selectedCategory }}</p>
      
      <div class="controlsRow">
          <div class="filterContainer">
              <select (change)="onCategoryChange($event)" class="categorySelect">
                  <option value="All Products" [selected]="selectedCategory === 'All Products'">All Products</option>
                  @for (category of categories; track $index) {
                      <option [value]="category" [selected]="selectedCategory === category">
                          {{ category }}
                      </option>
                  }
              </select>
          </div>

          <div class="searchContainer">
              <span class="searchIcon">üîç</span>
              <input type="text" placeholder="Search products..." (input)="onSearch($event)" class="searchInput" />
          </div>
      </div>
  </div>
  <hr />

  <div class="productsContainer">
      @if (products.length === 0) {
          <p class="empty-product-text">No products found.</p>
      } @else {
          <!-- Desktop View: Horizontal Scroll Rows -->
          <div class="desktop-view">
              @for (row of productRows; track $index) {
                  <div class="rowWrapper">
                      <button class="scrollArrow leftArrow" (click)="scrollRow(rowContainer, 'left')">&lt;</button>
                      <div class="productRow" #rowContainer>
                          @for (prod of row; track $index) {
                              <app-product 
                                  [productContainer]="prod"
                                  (openModal)="showProductModal($event)">
                              </app-product>
                          }
                      </div>
                      <button class="scrollArrow rightArrow" (click)="scrollRow(rowContainer, 'right')">&gt;</button>
                  </div>
              }
          </div>

          <!-- Mobile View: Vertical Grid -->
          <div class="mobile-view">
              <div class="mobile-products-grid">
                  @for (prod of products; track $index) {
                      <app-product 
                          [productContainer]="prod"
                          (openModal)="showProductModal($event)">
                      </app-product>
                  }
              </div>
          </div>
      }
  </div>
</div>

@if (selectedProduct) {
<app-product-modal
   [product]="selectedProduct" (close)="selectedProduct=null"></app-product-modal>
}
